sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/m/library","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/Device"],function(e,t,n,i,o,s,a,r,l){"use strict";v+
ar g=i.URLHelper;return e.extend("translations.controller.Detail",{formatter:n,onInit:function(){var e=new t({busy:false,delay:0,rowCount:0});this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched,this);this.setModel(e,"detailView+
");this.getOwnerComponent().getModel("translation").metadataLoaded().then(this._onMetadataLoaded.bind(this))},handleExitFullScreen:function(){var e=!l.system.phone;this.getModel("appView").setProperty("/layout","MidColumnFullScreen");this.getRouter().nav+
To("object",{layout:"OneColumn",objectId:"ZPM_C_EEQUIP"},e)},onSelectTransport:async function(e){if(await this._checkUnsavedChanges()){var t=this.getView();if(!this._pTransportSelectionDialog){this._pTransportSelectionDialog=r.load({id:t.getId(),name:"tr+
anslations.view.fragment.TransportSelectionDialog",controller:this}).then(function(e){t.addDependent(e);return e})}this._pTransportSelectionDialog.then(function(e){e.open()}.bind(this))}},handleSearchTR:function(e){var t=e.getParameter("value");var n=new+
 s("As4text",a.Contains,t);var i=e.getSource().getBinding("items");i.filter([n])},handleTRValueHelpClose:function(e){var t=e.getSource().getBinding("items"),n=this.getOwnerComponent().getModel("i18n").getResourceBundle(),i=e.getParameter("selectedContext+
s");t.filter([]);if(i&&i.length){let e=i[0].getObject().Trkorr,t=this.getView().getBindingContext("translation").getObject().Ddlxname;this.getView().getModel("translation").callFunction("/Transport",{method:"POST",urlParameters:{Ddlxname:t,Cds:t,Transpor+
t:e},success:function(){o.success(n.getText("transportSuccess"))},error:function(){o.error(n.getText("transportError"))}})}},onSave:function(e){let t=this.getOwnerComponent().getModel("i18n").getResourceBundle();let n=this.getModel("translation");if(n.ha+
sPendingChanges()){this._setBusy(true);n.submitChanges({success:function(e){o.success(t.getText("saveSuccess"));this._setBusy(false)}.bind(this),error:function(e){o.error(t.getText("saveError"));this._setBusy(false)}})}else{o.warning(t.getText("noChanges+
"))}},formatHighlight:function(e,t,n,i){if(e===null){return"None"}else if(e&&t&&n&&i){return"Success"}return"Warning"},onFilterTranslations:function(e){var t=e.getParameter("query"),n=[];if(t){n=[new s("Element",a.Contains,t)]}else{n=[]}this.getView().by+
Id("table").getBinding("rows").filter(n)},onValueChange:function(e){let t=e.getSource().getBindingContext("translation").getPath();if(e.getSource().getBinding("value").vOriginalValue!==e.getParameter("value")){this.getView().getModel("translation").setPr+
operty(t+"/"+e.getSource().getBinding("value").sPath+"Changed",true)}else{this.getView().getModel("translation").setProperty(t+"/"+e.getSource().getBinding("value").sPath+"Changed",false)}},onCloseDetailPress:function(){this.getModel("appView").setProper+
ty("/actionButtonsInfo/midColumn/fullScreen",false);this.getOwnerComponent().oListSelector.clearListListSelection();this.getRouter().navTo("list")},toggleFullScreen:function(){var e=this.getModel("appView").getProperty("/actionButtonsInfo/midColumn/fullS+
creen");this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",!e);if(!e){this.getModel("appView").setProperty("/previousLayout",this.getModel("appView").getProperty("/layout"));this.getModel("appView").setProperty("/layout","MidC+
olumnFullScreen")}else{this.getModel("appView").setProperty("/layout",this.getModel("appView").getProperty("/previousLayout"))}},_onObjectMatched:function(e){var t=e.getParameter("arguments").objectId;this.getModel("appView").setProperty("/layout","TwoCo+
lumnsMidExpanded");this.getModel("translation").metadataLoaded().then(function(){this.getModel("translation").resetChanges();let e=this.getView().getModel("translation");e.setUseBatch(true);e.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);var n=t+
his.getModel("translation").createKey("CDS",{Ddlxname:t});this._bindView("translation>/"+n)}.bind(this))},_bindView:function(e){this._setBusy(false);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function+
(){this._setBusy(true)}.bind(this),dataReceived:function(e){this._setBusy(false)}.bind(this)}})},_onBindingChange:function(){var e=this.getView(),t=e.getElementBinding("translation");if(!t.getBoundContext("translation")){this.getRouter().getTargets().dis+
play("detailObjectNotFound");this.getOwnerComponent().oListSelector.clearListListSelection();return}var n=t.getPath(),i=this.getResourceBundle(),o=e.getModel("translation").getObject(n),s=o.Ddlxname,a=o.Ddlxname,r=this.getModel("detailView");this.getOwne+
rComponent().oListSelector.selectAListItem(n);let l=this.getView().byId("table").getBinding("rows");l.attachChange(function(){let e=l.getLength();r.setProperty("/numberOfLines",e)})},_onMetadataLoaded:function(){var e=this.getView().getBusyIndicatorDelay+
(),t=this.getModel("detailView");t.setProperty("/delay",0);this._setBusy(true);t.setProperty("/delay",e)},_checkUnsavedChanges:async function(){let e=this.getModel("translation");return new Promise((t,n)=>{if(e.hasPendingChanges()){let e=this.getOwnerCom+
ponent().getModel("i18n").getResourceBundle();o.warning("There are unsaved changes. Are you sure you want to transport?",{actions:[o.Action.OK,o.Action.CANCEL],emphasizedAction:o.Action.OK,onClose:function(e){if(e==="CANCEL"){t(false)}else{t(true)}}})}el+
se{t(true)}})},_setBusy:function(e){this.getModel("detailView").setProperty("/busy",e)}})});                                                                                                                                                                   